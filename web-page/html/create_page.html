<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Profile</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
    <div class="container">
        <div class="form-wrapper">
            <div style="display: flex; justify-content: flex-end; margin-bottom: 15px;">
                <a href="/html/view_page.html" class="btn btn-view-users">View Users</a>
            </div>
            <h1>Create Profile</h1>
            <form id="createForm" method="POST" action="/api/create">
                
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" required placeholder="Enter your full name">
                </div>

                <div class="form-group">
                    <label for="email">Email ID:</label>
                    <input type="email" id="email" name="email" required placeholder="Enter your email address">
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" name="phone" required placeholder="Enter your phone number">
                </div>

                <div class="form-group">
                    <label>Interested Sports:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="cricket" name="sports" value="Cricket">
                            <label for="cricket">Cricket</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="football" name="sports" value="Football">
                            <label for="football">Football</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="basketball" name="sports" value="Basketball">
                            <label for="basketball">Basketball</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tennis" name="sports" value="Tennis">
                            <label for="tennis">Tennis</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="volleyball" name="sports" value="Volleyball">
                            <label for="volleyball">Volleyball</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="badminton" name="sports" value="Badminton">
                            <label for="badminton">Badminton</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="swimming" name="sports" value="Swimming">
                            <label for="swimming">Swimming</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="boxing" name="sports" value="Boxing">
                            <label for="boxing">Boxing</label>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Create</button>
                    <button type="reset" class="btn btn-secondary">Clear</button>
                </div>
            </form>
            <div id="message" style="margin-top: 20px; padding: 10px; display: none;"></div>
        </div>
    </div>

    <script>
        document.getElementById('createForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const messageDiv = document.getElementById('message');
            
            try {
                // Send POST request to API
                const response = await fetch('/api/create', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Success
                    messageDiv.style.display = 'block';
                    messageDiv.style.backgroundColor = '#d4edda';
                    messageDiv.style.color = '#155724';
                    messageDiv.style.border = '1px solid #c3e6cb';
                    messageDiv.style.borderRadius = '4px';
                    messageDiv.innerHTML = `<strong>Success!</strong> User ${data.username} created with ID ${data.user_id}. <a href="/html/view_page.html" style="color: #155724; text-decoration: underline;">View all users</a>`;
                    
                    // Reset form
                    this.reset();
                } else {
                    // Error
                    messageDiv.style.display = 'block';
                    messageDiv.style.backgroundColor = '#f8d7da';
                    messageDiv.style.color = '#721c24';
                    messageDiv.style.border = '1px solid #f5c6cb';
                    messageDiv.style.borderRadius = '4px';
                    messageDiv.innerHTML = `<strong>Error!</strong> ${data.error}`;
                }
            } catch (error) {
                messageDiv.style.display = 'block';
                messageDiv.style.backgroundColor = '#f8d7da';
                messageDiv.style.color = '#721c24';
                messageDiv.style.border = '1px solid #f5c6cb';
                messageDiv.style.borderRadius = '4px';
                messageDiv.innerHTML = `<strong>Error!</strong> ${error.message}`;
            }
        });
    </script>
</body>
</html>
